<!DOCTYPE html>
<html lang="zh">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="yuex (悟道洞穴人)">
    <meta name="author" content="yuex">
    <link rel="icon" type="image/png" href="/static/images/favicon.png">

        <title>terminal切换小结 · yuex (悟道洞穴人)</title>


    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.1.1/flatly/bootstrap.min.css" type="text/css"><link rel="stylesheet" href="/theme/css/main.css"><link rel="stylesheet" href="/theme/css/code.css"><script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

    <!--<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/flatly/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="/theme/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="/theme/css/flatly.css" type="text/css">-->
    <!--<link rel="stylesheet" href="/theme/css/main.css" type="text/css">-->
    <!--<script src="/theme/js/jquery-1.10.2.min.js"></script>-->
    <!--<script src="/theme/js/jquery-migrate-1.2.1.min.js"></script>-->
    <!--<script src="/theme/js/bootstrap.min.js"></script>-->

</head>

<body>
  <div class="containter" id="wrap">
      <nav class="navbar navbar-default" role="navigation">
    <div class="container">

      <!--navbar-header-->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <!--<ul class="nav navbar-nav navbar-left">-->
          <!--<li>-->
          <a class="navbar-brand" href="/">yuex (悟道洞穴人)</a>
          <!--</li>-->
        <!--</ul>-->
      </div> <!--navbar-header-->

      <!-- Search Box -->
          <form class="navbar-form navbar-right" role="search"
            action="http://www.google.com/cse" 
            id="searchbox_010115183842216248216:xa0zrczzxyk" target="_blank"> 
              <input type="hidden" name="cx" value="010115183842216248216:xa0zrczzxyk" /> 
              <input type="text" name="q" class="form-control" placeholder="Search">
          </form>

      <!--Menuitems, collapable-->
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
                <li >
                  <a href="/">Home</a>
                </li>

                <li >
                  <a href="/about.html">About</a>
                </li>

                <li >
                  <a href="/selected.html">Selected</a>
                </li>

              <li class="btn-group">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Archives<b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="/tags.html">Tags</a></li>
                  <li><a href="/categories.html">Categories</a></li>
                  <li><a href="/archives.html">Chronological</a></li>
                </ul>
              </li>
              <li class="btn-group">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">FindMe<b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="/static/images/email.png">Email</a></li>
                  <li><a href="http://github.com/yuex">Github</a></li>
                </ul>
              </li>

        </ul>
      </div><!-- /.navbar-collapse -->

    </div> <!--container-->
  </nav>


    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="page-header">
        <h1><a href="/posts/2013/09/terminal-switching.html">terminal切换小结</a></h1>
    </div>

        </div>
      </div>

      <div class="row">
        <div class="col-md-2 col-md-offset-0">
        </div>

        <div class="col-md-8">

    <span id="article_info">
    <a class="label label-primary" 
      href="/category/linux.html">linux</a>
      <b> · </b>
        <a class="label label-primary" 
          href="/tag/terminal.html">terminal</a>
        <a class="label label-primary" 
          href="/tag/xterm.html">xterm</a>
        <a class="label label-primary" 
          href="/tag/urxvt.html">urxvt</a>
    <!--<span class="glyphicon glyphicon-calendar"></span>-->
      <b> · </b>
      <a href="/archives.html#Year2013">2013</a>-<a href="/archives.html#Year2013Month9">09</a>-<a href="/archives.html#Year2013Month9Day24">24</a>

    <!--<span class="glyphicon glyphicon-user"></span>-->
      <b> · </b>
    <a href="/about.html">yuex</a>
  </span>

  <hr/>

  <div>
    <p> 早就听说 xterm 和 urxvt 是轻量高可配置，所以想利用周末的时间把某现在在用的 terminator 切换到 xterm 或者 urxvt。结果放弃了。倒不是因为配置太过复杂，而是某觉得，在进行了一定配置之后，对比需求 / 成本 / 收益觉得，这样的配置不能称之为有效。某认为将这些东西总结一下，可能有助于有同样切换初衷的同学少走一些弯路。</p>
<p> 某切换 terminal 的初始需求 :</p>
<ol>
<li> 可全屏 </li>
<li> 支持 solarized 的颜色设置 </li>
<li> 支持 inconsolata-g 和 wenquanyi 中文 </li>
<li> 支持 tab</li>
<li> 可以和 tmux 和 powerline 和谐相处 </li>
<li> 轻量化 </li>
<li>copy and paste</li>
</ol>
<p> 因为 urxvt 的初衷就是取代 xterm。而 terminator，konsole，gnome-terminal，xfce4-terminal 的设置都是大同小异。所以下面的讨论主要以 urxvt 和 terminator 为例。</p>
<p> 第一条 </p>
<p>urxvt 需要使用 wmctrl 来进行全屏控制，需要对 urxvt 进行 perl 扩展，可以参考 AUR 中的 urxvt-fullscreen<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup>。xterm 内建支持 fullscreen，只不过绑定键位是 Alt-Enter</p>
<p> 第二条 </p>
<p>urxvt 和 xterm 的颜色设置都是通过 .Xresources 或者 .Xdefaults 来进行的 ( 为个简便，以下仅用 .Xresources 进行指代 )。可以通过 <code>*color</code> 的通位方式来让 xterm 和 urxvt 来使用相同的位置。但是一旦设置了 foreground color，那么在 vim 当中，就没 reverse video 的效果了。光标不会再根据当前 text 的语法高亮情况来变换光标颜色了 .。</p>
<p> 第三条 </p>
<p>urxvt 和 xterm 都可以设置两种字体。不同的是二者在 .Xresources 中的资源名是不同的。urxvt 通过 <code>URxvt.font: xft:*，xft:*</code> 来指定，而 xterm 要分别使用 <code>xterm.faceName</code> 和 <code>xterm.faceNameDoubleSize</code> 来指定英文和中文字体。不过要注意的是，像某这样使用 inconsolata-g 有 <code>-</code> 符号的，<code>fc-list</code> 会显示实际的名字要使用 "Inconsolata-g"，这个用法在 <code>urxvt -fn</code> 的选项中是没有问题的。但如果要将这个配置写入到 .Xresources 当中，要将 <code>\</code> 再 escape 一次，变成 <code>URxvt.font:xft:Inconsolata\\-g</code>。</p>
<p> 第四条 </p>
<p>xterm 不支持。urxvt 要通过 perl 扩展。可以参考 tabbed 和 tabbedex<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup>。tabbed 是 urxvt 自带的扩展。不同的是 tabbed 只支持新建 tab 和 tab 之间的切换，而 tabbedex 还额外支持 tab 重命名和 tab 位置的相互调换。tabbedex 可以参考 AUR 中的，但是要注意的是 tabbedex 的实现目前有 bug，要手动注释掉其代码中的 <code>on_user_command</code> 函数，这个并不影响 tabbedex 的功能，只是一个留给用户进行键位绑定的 hook，可以 <code>man urxvtperl</code> 确认。其实如果是配合 tmux 使用的话，tab 支持可以不考虑，可以用 tmux 的 window 来模拟 tab。</p>
<p> 第五条 </p>
<p>xterm 不能显示 powerline 中的 fancy symbol，即使将字体 patch 过也不行。urxvt 可以正常使用 powerline。但二者在配合 tmux 使用时，在使用 manpage 的时候，less 会的 reverse video 有问题，需要做一个 hack<sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">3</a></sup>。但是做完这个 hack 之后，会使得二者的可移植性大大降低。甚至在 urxvt 中使用 tmux 后，做 <code>sudo</code> 的时候都会提示，root 下没有做这个 hack，更别说将这些配置直接拷贝到其它机器上了。需要将这个 hack 一同拷贝。</p>
<p> 第六条 </p>
<p> 不可否认 xterm 和 urxvt 都是轻量级的 terminal emulator，对系统资源占用较少。某粗略测算 urxvt 是 terminaotr 的 1/5，xterm 是 terminator 的 1/10。但考虑到目前笔电的硬件配置，系统资源占用少已经不能算是一个 killer feature 了。而且就算考虑到系统资源占用，完全可以换装 xfce4-terminal，它的资源使用和 urxvt 和 xterm 完全是可比的。再者说，也没有人会在高负载的 server 上使用图形介面吧 ? 如果还要使用 VNC 来连接 server 的话，这个做法本身就有问题了。</p>
<p> 第七条 </p>
<p>xterm 和 urxvt 都需要进行额外的配置。因为做到这一步，某已经决定就到这里了，所以就没有再继续进行这一项的具体配置了。</p>
<p> 这上面几条来看，虽然 urxvt 和 xterm 可以在经过配置后达到这些目的，但是对应的移植性和维护性都要有所降低，与 terminaotr 这些 terminal 相比，已经不具有即装即用性了。当然，urxvt 也并非全然没有它的特点。比如，在 urxvt 中通过 perl 扩展，可以开启 url 选择模式，完全通过键盘就可以选择 url 并在 browser 中打开。还可以通过 <code>URxvt.colorUL</code> 来让有下划线的 text 有不同的样式，这个在 manpage 中还是蛮方便的。</p>
<p> 上所述，某最后决定还是继续使用 terminator 好了。正如一些同学批评的那样 </p>
<blockquote>
<p> 有这个时间还不如多写现行代码 </p>
</blockquote>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="https://aur.archlinux.org/packages/urxvt-fullscreen/">https://aur.archlinux.org/packages/urxvt-fullscreen/</a>&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="https://aur.archlinux.org/packages/urxvt-tabbedex-git/">https://aur.archlinux.org/packages/urxvt-tabbedex-git/</a>&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p><a href="http://tmux.svn.sourceforge.net/viewvc/tmux/trunk/FAQ">http://tmux.svn.sourceforge.net/viewvc/tmux/trunk/FAQ</a> search "reverse video"&#160;<a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
  </div>

  <hr/>

      <ul class="pager">
        <li class="previous">
        <a href="/posts/2013/09/config-sshd-using-pam.html">
          &laquo; Newer</a>
        </li>
        <li class="next">
        <a href="/posts/2013/03/pdf-annotation.html">
          Older &raquo;</a>
        </li>
      </ul>

    <hr/>
<div class="comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_identifier = "posts/2013/09/terminal-switching.html";
    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://blogiliorkcom.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
</div>

        </div>

        <div class="col-md-2">
        </div>
      </div>

      <div id="pagination">
        <div class="row">
          <div class="col-md-8 col-md-offset-2">
          </div>
        </div>
      </div>
    </div>

    <p>&nbsp;</p>
    <p>&nbsp;</p>
  </div>

    <nav id="footer" class="navbar navbar-default">
    <div class="container">
        <p id="footer-text" class="navbar-text text-center">
          Powered by
          <a href="http://docs.getpelican.com">Pelican</a>
          and
          <a href="http://getbootstrap.com/">Bootstrap</a>.
          Theme <a href="http://github.com/yuex/pelican-iliork">iliork</a>.
        </p>
        <!--<p id="footer-text" class="navbar-text text-center">-->
          <!--Copyright © <a href="/about.html">yuex</a>-->
        <!--</p>-->
      </div>
    </div>
  </nav>

</body>
</html>